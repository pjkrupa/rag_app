
<div id="chat-box"></div>

<form
    hx-post="/chat"
    hx-target="#chat-box"
    hx-swap="beforeend"
    hx-indicator="#status"
    hx-on="htmx:afterRequest: this.reset()"
    autocomplete="off"
>
    <input type="hidden" name="chat_id" value="{{ chat_id }}">
    <textarea name="prompt" rows="3" autocomplete="off" required></textarea>
    <button type="submit">Send</button>
</form>

<div id="status" class="htmx-indicator">Workingâ€¦</div>

    <script>
        document.body.addEventListener("htmx:afterSwap", function (event) {
            if (event.detail.target.id === "chat-box") {
                const box = document.getElementById("chat-box");
                box.scrollTop = box.scrollHeight;
            }
        });
    </script>

